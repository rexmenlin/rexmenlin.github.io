"use strict";(self.webpackChunkmy_site=self.webpackChunkmy_site||[]).push([[4879],{8293:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"finance-bank-api/Day05 - \u7e7c\u7e8c\u628a\u52a0\u5bc6\u9019\u4ef6\u4e8b\u770b\u4e0b\u53bb","title":"Day05 - \u7e7c\u7e8c\u628a\u52a0\u5bc6\u9019\u4ef6\u4e8b\u770b\u4e0b\u53bb","description":"\u4e2d\u79cb\u9023\u5047\u9084\u8981\u5beb\u9435\u4eba\u8cfd\u7684\u6587\u7ae0\u771f\u7684\u662f\u6709\u4e00\u9ede\u5403\u529b\uff0c\u96d6\u7136\u5e73\u5e38\u4e5f\u53ea\u6709\u665a\u4e0a\u4e0b\u73ed\u5f8c\u53ef\u4ee5\u64b0\u5beb\u6587\u7ae0\uff0c\u4f46\u9023\u5047\u7562\u7adf\u6709\u8f03\u591a\u9700\u8981\u548c\u5bb6\u4eba\u4e00\u8d77\u4e92\u52d5\u7684\u6642\u9593\uff0c\u8981\u5c08\u6ce8\u5c07\u5fc3\u601d\u653e\u5728\u6587\u4ef6\u64b0\u5beb\u8207\u898f\u683c\u7814\u7a76\u548c\u6e2c\u8a66\u4e0a\u9762\uff0c\u771f\u7684\u6709\u4e00\u5b9a\u7684\u96e3\u5ea6\u3002","source":"@site/docs/finance-bank-api/Day05 - \u7e7c\u7e8c\u628a\u52a0\u5bc6\u9019\u4ef6\u4e8b\u770b\u4e0b\u53bb.md","sourceDirName":"finance-bank-api","slug":"/finance-bank-api/Day05 - \u7e7c\u7e8c\u628a\u52a0\u5bc6\u9019\u4ef6\u4e8b\u770b\u4e0b\u53bb","permalink":"/docs/finance-bank-api/Day05 - \u7e7c\u7e8c\u628a\u52a0\u5bc6\u9019\u4ef6\u4e8b\u770b\u4e0b\u53bb","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Day04 - \u91d1\u6d41API\u7684\u8d77\u624b\u5f0f\uff0c\u6bcf\u6b21\u6e9d\u901a\u90fd\u6a5f\u5bc6","permalink":"/docs/finance-bank-api/Day04 - \u91d1\u6d41API\u7684\u8d77\u624b\u5f0f\uff0c\u6bcf\u6b21\u6e9d\u901a\u90fd\u6a5f\u5bc6"},"next":{"title":"Day06 - \u5b89\u5168\u7c3d\u7ae0\u7c3d\u4e0b\u53bb\uff0cAPI\u547c\u53eb\u6c92\u5728\u6015","permalink":"/docs/finance-bank-api/Day06 - \u5b89\u5168\u7c3d\u7ae0\u7c3d\u4e0b\u53bb\uff0cAPI\u547c\u53eb\u6c92\u5728\u6015"}}');var i=s(4848),r=s(8453);const c={sidebar_position:6},o=void 0,a={},l=[{value:"IV\u503c",id:"iv\u503c",level:4},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e",level:5},{value:"\u98df\u6750\u8490\u96c6\u597d\u4e86\uff0c\u53ef\u4ee5\u9032\u884cAES\u52a0\u5bc6\u4e86\uff01",id:"\u98df\u6750\u8490\u96c6\u597d\u4e86\u53ef\u4ee5\u9032\u884caes\u52a0\u5bc6\u4e86",level:4},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e-1",level:5},{value:"\u7d42\u65bc\u628aMessage\u5bc6\u6587\u6e96\u5099\u597d\u4e86",id:"\u7d42\u65bc\u628amessage\u5bc6\u6587\u6e96\u5099\u597d\u4e86",level:3}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u4e2d\u79cb\u9023\u5047\u9084\u8981\u5beb\u9435\u4eba\u8cfd\u7684\u6587\u7ae0\u771f\u7684\u662f\u6709\u4e00\u9ede\u5403\u529b\uff0c\u96d6\u7136\u5e73\u5e38\u4e5f\u53ea\u6709\u665a\u4e0a\u4e0b\u73ed\u5f8c\u53ef\u4ee5\u64b0\u5beb\u6587\u7ae0\uff0c\u4f46\u9023\u5047\u7562\u7adf\u6709\u8f03\u591a\u9700\u8981\u548c\u5bb6\u4eba\u4e00\u8d77\u4e92\u52d5\u7684\u6642\u9593\uff0c\u8981\u5c08\u6ce8\u5c07\u5fc3\u601d\u653e\u5728\u6587\u4ef6\u64b0\u5beb\u8207\u898f\u683c\u7814\u7a76\u548c\u6e2c\u8a66\u4e0a\u9762\uff0c\u771f\u7684\u6709\u4e00\u5b9a\u7684\u96e3\u5ea6\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6628\u5929\u628aHash ID\u6e96\u5099\u597d\u5f8c\uff0c\u63a5\u4e0b\u4f86\u5c31\u662f\u53e6\u4e00\u500b\u8981\u7d20\uff1aIV\u503c\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"iv\u503c",children:"IV\u503c"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6e96\u5099IV\u503c\u524d\uff0c\u7a0d\u70ba\u7528\u5f88\u7c21\u77ed\u7684\u7bc7\u5e45\u8aaa\u660e\u4e00\u4e0bAES-CBC\u52a0\u89e3\u5bc6\u6cd5\u7684\u660e\u6587\u3001Key\u8207IV\u7684\u4f5c\u7528\u8207\u95dc\u4fc2\u3002\u4f46\u7531\u65bc\u89e3\u8aaaAES\u539f\u7406\u7684\u6587\u7ae0\u76f8\u7576\u591a\uff0c\u6709\u8208\u8da3\u53ef\u4ee5\u81ea\u884c\u641c\u5c0b\u8207\u95b1\u8b80\uff0c\u5728\u6b64\u53ea\u89e3\u8aaa\u8b93\u6c92\u7528\u904eAES-CBC\u7684\u670b\u53cb\u4e86\u89e3\u70ba\u4ec0\u9ebc\u6211\u5011\u9700\u8981\u9019\u4e9b\u6771\u897f\u7684\u95dc\u9375\u6982\u5ff5\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u9996\u5148\uff0cAES-CBC\u662f\u4e00\u500b\u5c0d\u7a31\u5f0f\u7684\u5340\u584a\u52a0\u5bc6\u6cd5\uff0c\u9019\u88e1\u7684\u300c\u5c0d\u7a31\u300d\u6307\u7684\u662f\u52a0\u5bc6\u8207\u89e3\u5bc6\u6240\u9700\u8981\u7528\u5230\u7684",(0,i.jsx)(e.strong,{children:"\u91d1\u9470\u662f\u76f8\u540c"}),"\u7684\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u7684\u300cHash ID\u300d\u6216\u8005\u300cAES Key\u300d\u3002\n\u800c\u52a0\u5bc6\u6280\u8853\uff0c\u4f34\u96a8\u800c\u4f86\u7684\u7e3d\u662f\u89e3\u5bc6(\u88ab\u7834\u89e3)\u7684\u8b70\u984c\u3002\u5982\u4f55\u589e\u52a0\u88ab\u7834\u89e3\u7684\u96e3\u5ea6\u8207\u964d\u4f4e\u98a8\u96aa\uff1f\u7c21\u55ae\u7684\u8aaa\uff0c\u5982\u679c\u4f60\u6709\u4e00\u6bb5\u4e00\u6a21\u4e00\u6a23\u7684\u660e\u6587\uff0c\u7d93\u7531\u76f8\u540c\u7684\u91d1\u9470\u53bb\u52a0\u5bc6\uff0c\u5f88\u986f\u7136\u7684\u6bcf\u4e00\u6b21\u57f7\u884c\u52a0\u5bc6\uff0c\u90fd\u6703\u7522\u751f\u51fa\u4e00\u6a21\u4e00\u6a23\u7684\u7d50\u679c\u3002\u9019\u6a23\u5c0d\u65bc\u6709\u5fc3\u4eba\u58eb\u82e5\u80fd\u5920\u7372\u53d6\u8db3\u5920\u7684\u6a23\u672c\u8cc7\u6599\uff0c\u5c31\u6709\u6a5f\u6703\u5f9e\u4e2d\u5617\u8a66\u7834\u89e3\u8207\u5206\u6790\uff0c\u627e\u51fa\u52a0\u5bc6\u904e\u7a0b\u7684\u53ef\u80fd\u898f\u5247\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u65bc\u662f\u5c31\u6709\u4e86IV\u521d\u59cb\u5411\u91cf\u7684\u6982\u5ff5\uff0c\u7c21\u55ae\u8aaaIV\u4e26\u975e\u300c\u5bc6\u78bc\u300d\uff0c\u5728\u539f\u672c\u52a0\u5bc6\u904e\u7a0b\u4e2d\u518d\u52a0\u4e0a\u4e00\u500b\u53c3\u6578(\u539f\u5247\u4e0a\u6bcf\u4e00\u6b21\u7684\u52a0\u5bc6IV\u90fd\u8981\u4e0d\u4e00\u6a23)\uff0c\u5982\u6b64\u4e00\u4f86\uff0c\u53ef\u8b93\u539f\u672c",(0,i.jsx)(e.strong,{children:"\u76f8\u540c\u660e\u6587"}),"\u4f7f\u7528",(0,i.jsx)(e.strong,{children:"\u76f8\u540c\u91d1\u9470"}),"\u7522\u751f\u7684\u5bc6\u6587\u7d50\u679c\u5177\u5099\u9ad8\u5ea6\u7684\u5dee\u7570\u6027\uff0c\u56e0\u6b64\u53ef\u5927\u5927\u589e\u52a0\u7834\u89e3\u8207\u5206\u6790\u7684\u56f0\u96e3\u6027\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u9084\u8a18\u5f97\u524d\u9762\u63d0\u5230\u6bcf\u4e00\u6b21\u8981\u547c\u53ebAPI\u6642\u90fd\u8981\u91cd\u65b0\u554f\u4e00\u6b21\u4e1460\u79d2\u5c31\u6703\u904e\u671f\u7684",(0,i.jsx)(e.code,{children:"Nonce"}),"\u503c\u55ce\uff1f\u4ed6\u5c31\u662f\u70ba\u4e86\u7522\u751f\u6bcf\u6b21\u505aAES-CBC\u5340\u584a\u52a0\u5bc6\u7684IV\u503c\u4f5c\u70ba\u7684\u57fa\u790e\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u4e0b\u4f86\u5c31\u662f\u8981\u9032\u884c\u6c38\u8c50API\u4e2d\u96d9\u65b9\u7d04\u5b9a\u597d\u7684IV\u7522\u751f\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u8981\u628aNonce\u518d\u9032\u884c\u4e00\u4e9b\u4e9b\u52a0\u5de5\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://ithelp.ithome.com.tw/upload/images/20210918/20130354Fn6DB6bnq7.png",alt:"https://ithelp.ithome.com.tw/upload/images/20210918/20130354Fn6DB6bnq7.png"})}),"\n",(0,i.jsx)(e.p,{children:"\u958b\u767c\u898f\u683c\u66f8\u4e2d\u63d0\u5230IV\u7684\u7522\u751f\u65b9\u5f0f"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Nonce \u503c\u7d93\u904e SHA256 \u904b\u7b97\u5f8c\u53d6\u53f3\u908a 16 \u4f4d\u5143\u5b57\u4e32"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c8\u51fa\u73fe\u4e86\u4e00\u500b\u95dc\u9375\u5b57",(0,i.jsx)(e.code,{children:"SHA256"}),"\uff0c\u4e00\u6a23\u7c21\u55ae\u63cf\u8ff0\u4e00\u4e0b\uff0cSHA256\u662f\u5b89\u5168\u96dc\u6e4a\u6f14\u7b97\u6cd52(SHA-2, Secure Hash Algorithm)\u7684\u4e00\u500b\u5be6\u4f5c\u7248\u672c\uff0c\u800c\u96dc\u6e4a\u7684\u76ee\u7684\u662f\u53ef\u5feb\u901f\u7684\u5c07\u4efb\u4f55\u4e0d\u56fa\u5b9a\u9577\u5ea6\u7684\u539f\u6587\u7d93\u904e\u6f14\u7b97\u5f8c\u5c0e\u51fa\u4e00\u500b\u56fa\u5b9a\u9577\u5ea6\u7684\u6458\u8981(\u6458\u8981\u9577\u5ea6\u6703\u4f9d\u5be6\u4f5c\u7248\u672c\u4e0d\u540c)\u3002"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u82e5\u6709\u9700\u8981\u9032\u4e00\u6b65\u4e86\u89e3\uff0c\u9019\u7bc7\u6587\u7ae0\u89e3\u91cb\u7684\u883b\u6e05\u695a\u7684\uff1a",(0,i.jsx)(e.a,{href:"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/602774/",children:"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/602774/"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5f9e",(0,i.jsx)(e.code,{children:"\u539f\u6587A"}),"\u2192",(0,i.jsx)(e.code,{children:"HASH\u904b\u7b97"}),"\u2192",(0,i.jsx)(e.code,{children:"\u6458\u8981B"}),"\u7684\u904e\u7a0b\uff0c\u53ef\u4ee5\u7576\u6210\u4e00\u7a2e\u7522\u751f\u8b58\u5225\u6027\u4ee3\u865f\u7684\u904e\u7a0b\uff0c\u800c\u4e14\u662f\u4e0d\u53ef\u9006\u7684(\u7121\u6cd5\u5f9eB\u8f49\u56deA)\uff0c\u4f46\u9700\u8981\u5f37\u8abf\u7684\u662f\u9019\u4e26\u975e\u662f\u300c\u52a0\u5bc6\u300d\u4e4b\u76ee\u7684\u3002\u4ed6\u53ef\u4ee5\u63d0\u4f9b\u7684\u597d\u8655\u662f\u4e00\u4f86\u53ef\u4e0d\u9700\u62ffA\u660e\u6587\u4f86\u505a\u8cc7\u6599\u4ea4\u63db\u4e4b\u4f7f\u7528\uff0c\u53ea\u9700\u4f7f\u7528\u8f49\u5316\u904e\u4e14\u8f03\u77ed\u7684\u6458\u8981B\u4f86\u4f7f\u7528\uff0c\u56e0\u70baB\u6458\u8981\u6709\u4e00\u5b9a\u7a0b\u5ea6\u53ef\u4ee3\u8868\u7684\u662fA\u6240\u58d3\u7e2e\u6f14\u5316\u4f86\u7684\uff0c\u5373\u4f7f\u7a0d\u70ba\u88ab\u4fee\u6539\u904e1%\u5167\u5bb9\u7684A'\uff0c\u7522\u751f\u51fa\u4f86\u7684\u6458\u8981\u6703\u548cB\u6709\u986f\u8457\u7684\u4e0d\u540c\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u53e6\u4e00\u7a2e\u76ee\u7684\u662f\u6211\u5728\u4e0d\u9700\u8981\u5132\u5b58\u7d00\u9304A\u539f\u6587\u7684\u72c0\u614b\u4e0b\uff0c\u8981\u77e5\u9053\u9019\u500bA\u548c\u7576\u521d\u7684A\u662f\u76f8\u540c\u7684\u6642\u5019\uff0c\u53ea\u9700\u8981\u5132\u5b58\u7d00\u9304\u76f8\u5c0d\u61c9\u7684\u6458\u8981B\uff0c\u548c\u5373\u6642\u4f5cHash\u904b\u7b97\u5f8c\u770bB\u662f\u5426\u76f8\u540c\uff0c\u53ef\u4ee5\u4ee5\u6b64\u63a8\u8ad6\u4f86\u6e90\u7684A\u662f\u76f8\u540c\u7684\u3002\u4f8b\u5982\u4e00\u822c\u7684\u6703\u54e1\u7cfb\u7d71\u4e2d\uff0c\u5728\u8cc7\u6599\u5eab\u4e2d\u70ba\u4e86\u907f\u514d\u8cc7\u6599\u53ef\u80fd\u5916\u6d29\u6216\u88ab\u6709\u6b0a\u9650\u53d6\u5f97\u8cc7\u6599\u7684\u4eba\u975e\u6cd5\u4f7f\u7528\uff0c\u56e0\u6b64\u4e0d\u6703\u5132\u5b58\u6703\u54e1\u7684\u660e\u6587\u5bc6\u78bc\uff0c\u50c5\u6703\u5132\u5b58\u6458\u8981\u96dc\u6e4a\u78bc\uff0c\u5728\u6703\u54e1\u767b\u5165\u6642\u624d\u52d5\u614b\u6bd4\u5c0d\u5169\u8005\u7684\u6458\u8981\u662f\u76f8\u540c\u3002\u9019\u4e5f\u5c31\u662f\u8a31\u591a\u7db2\u7ad9\u9ede\u9078\u300c\u5fd8\u8a18\u5bc6\u78bc\u300d\u6642\uff0c\u53ea\u80fd\u8b93\u4f60\u91cd\u65b0\u6539\u6389\u5bc6\u78bc\uff0c\u800c\u7121\u6cd5\u300c\u63d0\u4f9b\u7576\u521d\u4f60\u7684\u5bc6\u78bc\u300d\u7d66\u4f60\u7684\u539f\u56e0\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u6b64\u5982\u679c\u6709\u7db2\u7ad9\u7684\u300c\u5fd8\u8a18\u5bc6\u78bc\u300d\u529f\u80fd\u53ef\u4ee5\u628a\u539f\u672c\u4f60\u7684\u660e\u6587\u5bc6\u78bc\u5bc4\u7d66\u4f60\u7684\u8a71\uff0c\u5c31\u8981\u5c0f\u5fc3\u4e00\u4e0b\u9019\u500b\u7db2\u7ad9\u4fdd\u8b77\u6703\u54e1\u6a5f\u654f\u8cc7\u6599\u7684\u65b9\u5f0f\u4e86\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u8457\u6211\u5011\u5c31\u4f7f\u7528Python\u8a9e\u8a00\u4f86\u5be6\u4f5c\u4e00\u4e0b\uff0c\u900f\u904e\u76f8\u95dc\u7684\u96dc\u6e4a\u5957\u4ef6\u5373\u53ef\u5feb\u901f\u7522\u751f\u6211\u5011\u8981\u7684\u7d50\u679c\uff0c\u4f46\u5728\u6b64\u4e4b\u524d\u53ef\u5148\u4f7f\u7528SHA256 Online\u7684\u7db2\u7ad9\u5148\u884c\u78ba\u8a8d\u4e00\u4e0b\u6211\u5011\u60f3\u8981\u505a\u7684\u7d50\u679c\u6703\u662f\u4ec0\u9ebc\u3002\n\u7531\u65bcNonce\u503c\u662f\u6bcf\u4e00\u6b21\u90fd\u9700\u8981\u91cd\u555f\uff0c\u6211\u5011\u76ee\u524d\u5148\u662f\u9a57\u8b49\u904b\u4f5c\u7684\u53ef\u884c\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u5148\u62ff\u958b\u767c\u898f\u683c\u66f8\u4e2d\u7684Nonce\u503c\u4f86\u9032\u884c\u57fa\u790e\u7684\u9a57\u8b49\u3002"}),"\n",(0,i.jsx)(e.p,{children:"(\u4e0a\u9762\u653e\u5165Nonce\u7684\u503c\uff0c\u4e0b\u65b9\u6703\u662fSHA256\u7684\u7d50\u679c\uff0c\u4f46\u6211\u5011\u53ea\u9700\u8981\u6700\u53f3\u908a16\u4f4d\u5b57\u4e32)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://emn178.github.io/online-tools/sha256.html",children:"https://emn178.github.io/online-tools/sha256.html"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://ithelp.ithome.com.tw/upload/images/20210918/201303540bnS3R2S6D.png",alt:"https://ithelp.ithome.com.tw/upload/images/20210918/201303540bnS3R2S6D.png"})}),"\n",(0,i.jsxs)(e.p,{children:["\u56e0\u6b64\u6211\u5011\u7528Python\u7a0b\u5f0f\u4f86\u64b0\u5beb\u6642\uff0c\u4e5f\u5e0c\u671b\u53ef\u4ee5\u62ff\u5230\u53f3\u5074\u5c3e\u78bc\u7684",(0,i.jsx)(e.code,{children:"CB6FA68E42B655AB"}),"\u9019\u500b\u7d50\u679c\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import hashlib\nnonce = \"NjM2NjA0MzI4ODIyODguMzo3NzI0ZDg4ZmI5Nzc2YzQ1MTNhYzg2MTk3NDBlYTRhNGU0N2IxM2Q2M2JkMTIwOGU5YzZhMGFmNGY5MjA5YzVm\"\niv = hashlib.sha256(nonce.encode('UTF-8')).hexdigest().upper()[-16:]\n\nprint(iv)\n#output: CB6FA68E42B655AB\n"})}),"\n",(0,i.jsx)(e.h5,{id:"\u7a0b\u5f0f\u8aaa\u660e",children:"\u7a0b\u5f0f\u8aaa\u660e"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528Python\u7684SHA\u5148\u5f15\u5165hashlib\uff0c\u5c07nonce\u4ee5",(0,i.jsx)(e.code,{children:"UTF-8"}),"\u7de8\u78bc\u683c\u5f0f\u9032\u884cSHA256\u768416\u9032\u4f4d\u96dc\u6e4a\u6f14\u7b97\u5f8c\uff0c\u518d\u4f9d\u898f\u5b9a\u8f49\u6210\u5168\u5927\u5beb\u5b57\uff0c\u4e26\u53d6\u5f97\u53f3\u5074\u672b\u4f4d\u768416\u500b\u5b57\u5143\u4f5c\u70baIV\u6700\u7d42\u7d50\u679c\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u770b\u8d77\u4f86\u662f\u6210\u529f\u7684\uff0c\u9019\u500b\u8f38\u51fa\u7d50\u679c\u548c\u6211\u5011\u4f7f\u7528SHA256 Online\u7684\u7db2\u7ad9\u770b\u5230\u7684\u662f\u4e00\u6a23\u7684\u3002"}),"\n",(0,i.jsx)(e.h4,{id:"\u98df\u6750\u8490\u96c6\u597d\u4e86\u53ef\u4ee5\u9032\u884caes\u52a0\u5bc6\u4e86",children:"\u98df\u6750\u8490\u96c6\u597d\u4e86\uff0c\u53ef\u4ee5\u9032\u884cAES\u52a0\u5bc6\u4e86\uff01"}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u5011\u82b1\u4e86\u4e00\u4e9b\u6642\u9593\uff0c\u7d42\u65bc\u628a",(0,i.jsx)(e.code,{children:"\u5167\u6587\u8a0a\u606f"}),"\u3001",(0,i.jsx)(e.code,{children:"Hash ID (AES Key)"}),"\u3001",(0,i.jsx)(e.code,{children:"IV"}),"\u4e09\u6a23\u98df\u6750\u6e96\u5099\u597d\u4e86\uff0c\u63a5\u4e0b\u4f86\u5c31\u53ef\u4ee5\u904b\u7528\u6700\u5f8c\u7684AES-CBC\u795e\u5947\u5340\u584a\u52a0\u5bc6\u934b\uff0c\u628a\u6700\u7d42\u9700\u8981\u7684\u6210\u54c1",(0,i.jsx)(e.code,{children:"Message"}),"\u7d66\u88fd\u4f5c\u51fa\u4f86\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://ithelp.ithome.com.tw/upload/images/20210918/20130354hax9GSbcEk.png",alt:"https://ithelp.ithome.com.tw/upload/images/20210918/20130354hax9GSbcEk.png"})}),"\n",(0,i.jsx)(e.p,{children:"\u628a\u4e0a\u9762\u9019\u4e09\u6a23\u518d\u4f5c\u500b\u76e4\u9ede\u6574\u7406\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u8a0a\u606f\u5167\u6587"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'{\n    "ShopNo": "NA0249_001",\n    "OrderNo": "C201804300001",\n    "Amount": 50000,\n    "CurrencyID": "TWD",\n    "PayType": "C",\n    "CardParam": { "AutoBilling": "Y" },\n    "PrdtName": "\u4fe1\u7528\u5361\u8a02\u55ae",\n    "ReturnURL": "http://10.11.22.113:8803/QPay.ApiClient/Store/Return",\n    "BackendURL": "http://10.11.22.113:8803/QPay.ApiClient/AutoPush/PushSuccess"\n}\n'})}),"\n",(0,i.jsxs)(e.ol,{start:"2",children:["\n",(0,i.jsx)(e.li,{children:"Hash ID (AES Key)"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"87282A2FA0E209EBE1B3713AB56A06C2\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsx)(e.li,{children:"IV\u503c\n\u7531\u65bcIV\u503c\u662f\u6bcf\u6b21\u90fd\u8981\u5f9eNonce\u53d6\u7528\u5f97\u4f86\uff0c\u56e0\u6b64\u9019\u500b\u503c\u6703\u662f\u6bcf\u6b21\u90fd\u4e0d\u540c\u7684\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6c38\u8c50\u63d0\u4f9b\u4e86\u4e00\u500b\u52a0\u89e3\u5bc6\u6e2c\u8a66\u9801\u9762\uff0c\u6211\u5011\u5c31\u4ee5\u4f7f\u7528\u6e2c\u8a66\u7db2\u9801\u7522\u751f\u7684\u503c\u4f5c\u70ba\u76ee\u6a19\u503c\uff0c\u8a2d\u6cd5\u64b0\u5bebPython\u7a0b\u5f0f\u4e00\u6b65\u6b65\u9054\u5230\u548c\u4e0a\u9762\u4e00\u6a21\u4e00\u6a23\u7684Message\u5167\u6587\u3002\n\u6e2c\u8a66\u9801\u9762\uff1a\n",(0,i.jsx)(e.a,{href:"https://sandbox.sinopac.com/QPay.ApiClient/Calc/Encrypt",children:"https://sandbox.sinopac.com/QPay.ApiClient/Calc/Encrypt"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://ithelp.ithome.com.tw/upload/images/20210919/20130354OV3RynyaO5.png",alt:"https://ithelp.ithome.com.tw/upload/images/20210919/20130354OV3RynyaO5.png"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://ithelp.ithome.com.tw/upload/images/20210919/20130354RA41tmGv9f.png",alt:"https://ithelp.ithome.com.tw/upload/images/20210919/20130354RA41tmGv9f.png"})}),"\n",(0,i.jsxs)(e.p,{children:["\u9996\u5148\u6703\u9700\u8981\u4f7f\u7528Python\u7684AES\u529f\u80fd\u524d\uff0c\u8981\u5148\u78ba\u8a8d\u662f\u5426\u6709\u5b89\u88dd",(0,i.jsx)(e.code,{children:"PyCryptodome"}),"\u5957\u4ef6\u3002\n\u76f8\u95dc\u7528\u6cd5\u53ef\u53c3\u8003\u5b98\u65b9\u6587\u4ef6\uff1a\n",(0,i.jsx)(e.a,{href:"https://pycryptodome.readthedocs.io/en/latest/src/cipher/classic.html#cbc-mode",children:"https://pycryptodome.readthedocs.io/en/latest/src/cipher/classic.html#cbc-mode"})]}),"\n",(0,i.jsx)(e.p,{children:"Python Code\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'import json\nfrom Crypto.Cipher import AES \nfrom Crypto.Util.Padding import pad\n\nshop_data = {"ShopNo":"NA0001_001","OrderNo":"201807111119291750","Amount":50000,"CurrencyID":"TWD","PayType":"C","ATMParam":{},"CardParam":{"AutoBilling":"N","ExpMinutes":30},"PrdtName":"\u4fe1\u7528\u5361\u8a02\u55ae","ReturnURL":"http://10.11.22.113:8803/QPay.ApiClient-Sandbox/Store/Return","BackendURL":"https://sandbox.sinopac.com/funBIZ.ApiClient/AutoPush/PushSuccess"}\n\ndata_string = json.dumps(shop_data, ensure_ascii=False, separators=(\',\', \':\'))\n\nprint(data_string)\n#output: {"ShopNo":"NA0001_001","OrderNo":"201807111119291750","Amount":50000,"CurrencyID":"TWD","PayType":"C","ATMParam":{},"CardParam":{"AutoBilling":"N","ExpMinutes":30},"PrdtName":"\u4fe1\u7528\u5361\u8a02\u55ae","ReturnURL":"http://10.11.22.113:8803/QPay.ApiClient-Sandbox/Store/Return","BackendURL":"https://sandbox.sinopac.com/funBIZ.ApiClient/AutoPush/PushSuccess"}\n\nkey = b"4DA70F5E2D800D50B43ED3B537480C64"\niv = b"346BBE8E3F34FFEA"\n\ncipher = AES.new(key=key, mode=AES.MODE_CBC, iv=iv)\nmessage = cipher.encrypt(pad(bytearray(data_string, \'utf-8\'), AES.block_size))\n\nprint(message.hex().upper())\n\n#output: 4FE341D3A8C30C9A50573F3008F7B1CA8DD96FB2A4346D83936E5C4FDB21E87BA9E3D36A6635C6F5EBBD5438F3CA8FE97DEBB2ADBC82F92BF3C840B3128D8F00116536E7C936D7D587F6220C52C1367DF2BE9CBB16C6A7C6242AA8B38CD2E576328CF727E50FFA49B4F9FBE5DF10986C5299F9FC26E23E956AFDFB92B731FDA84ABEF1C89E0CD0A8CA8F7C23DC2D06E12A6F916EC47CDD9B4D4F87AC0B687EE1088A19F2C35C0FD8B0C97745B926FBAA48FEEDEB826C2C22743DB46781FF220ECA409FC150908540271E60184729C08C73275C54125C3F814FF33CA79A0E1B3902D446925FCC8235809FCBAB7E372D8C29E424CEFF0AD1CBD41E843714EB365158F2FC0B2E6FB48176D5CFF6B68F4BED4D7484C1A4723ABD059DA64A6703B30B0199B170FDF059899552FA1818ABA5B0D0E21014513985A738D59851EDF0B1CFB36A7B7B727109BE7789D284C75E5D694DFC9B7060DCBFD8C7915C95C4E0F29B\n\n'})}),"\n",(0,i.jsx)(e.h5,{id:"\u7a0b\u5f0f\u8aaa\u660e-1",children:"\u7a0b\u5f0f\u8aaa\u660e"}),"\n",(0,i.jsxs)(e.p,{children:["\u7531\u65bc",(0,i.jsx)(e.code,{children:"\u5167\u6587\u8a0a\u606f"}),"\u662fJSON\u683c\u5f0f\uff0c\u800cPython\u7684Dictionary Object\u672c\u8eab\u5c31\u652f\u63f4\u4e86\u5e7e\u4e4e\u548cJSON\u662f\u76f8\u540c\u7d50\u69cb\u7684\u8868\u793a\u6cd5\uff0c\u56e0\u6b64\u53ef\u5148\u4ee5\u6b64\u65b9\u5f0f\u6e96\u5099\u9019\u500b\u5167\u6587\u8a0a\u606f\u5167\u5bb9\uff0c\u518d\u5c07\u4e4b\u8f49\u63db\u6210json\u683c\u5f0f\u7684\u5b57\u4e32\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f46\u9019\u908a\u6709\u5e7e\u9ede\u8981\u683c\u5916\u6ce8\u610f\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528json.dumps()\u53ef\u76f4\u63a5\u5c07Python\u7684Dictionary Object\u8f49\u63db\u6210JSON\u5b57\u4e32"}),"\n",(0,i.jsx)(e.li,{children:"\u82e5\u76f4\u63a5\u4e0d\u5e36\u984d\u5916\u53c3\u6578\u8f49\u63db\u51fa\u4f86\u7684JSON\u5b57\u4e32\uff0c\u6703\u548c\u6c38\u8c50\u6e2c\u8a66\u9801\u9762\u7684JSON\u5b57\u4e32\u6709\u4e9b\u8a31\u5dee\u7570(\u4e2d\u6587\u6703\u8b8a\u6210ASCII\u5b57\u7b26\u986f\u793a\u800c\u975e\u4e2d\u6587\uff0c\u4e14dumps\u51fa\u4f86\u6703\u52a0\u4e0a\u4e00\u4e9b\u7a7a\u683c\u3002\u9019\u6a23\u6700\u5f8c\u505a\u51fa\u4f86\u7684AES\u52a0\u5bc6\u7d50\u679c\u6703\u4e0d\u540c\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6211\u5011\u6c92\u6709\u4fee\u6b63\uff0c\u5247\u5167\u6587dumps\u8f49\u51fa\u5f8c\u6703\u5448\u73fe\u4e0b\u9762\u7684\u60c5\u6cc1\uff1a(\u6ce8\u610f\u539f\u672c\u4e2d\u6587\u7684\u5730\u65b9\uff0c\u4ee5\u53ca\u591a\u52a0\u4e0a\u7684\u7a7a\u683c)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'{"ShopNo": "NA0001_001", "OrderNo": "201807111119291750", "Amount": 50000, "CurrencyID": "TWD", "PayType": "C", "ATMParam": {}, "CardParam": {"AutoBilling": "N", "ExpMinutes": 30}, "PrdtName": "\\u4fe1\\u7528\\u5361\\u8a02\\u55ae", "ReturnURL": "http://10.11.22.113:8803/QPay.ApiClient-Sandbox/Store/Return", "BackendURL": "https://sandbox.sinopac.com/funBIZ.ApiClient/AutoPush/PushSuccess"}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u6b64\u6211\u5011\u5728json.dumps()\u4e2d\u50b3\u5165\u5169\u500b\u53c3\u6578\u4f86\u4fee\u6b63\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"ensure_ascii=False"}),"\u8b93\u5b57\u4e32\u4ee5\u975eASCII\u78bc\u5448\u73fe"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"separators=(',', ':')"}),"\u91cd\u65b0\u5b9a\u7fa9\u7522\u751f\u51fa\u4f86\u7684JSON\u5206\u683c\u5b57\u7b26\uff0c\u539f\u672c\u9017\u865f\u8207\u5192\u865f\u5f8c\u6703\u591a\u5e36\u4e00\u500b\u7a7a\u683c\uff0c\u73fe\u5728\u91cd\u65b0\u5b9a\u7fa9\u7121\u7a7a\u683c\u7248\u672c\u7d66\u5b83\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4fee\u6b63\u5b8c\u7684\u7d50\u679c\u5c31\u6703\u662f\u6211\u5011\u8981\u7684\u4e86 (\u7121\u7a7a\u683c\u3001ASCII\u4e82\u78bc\u4fee\u6b63)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'{"ShopNo":"NA0001_001","OrderNo":"201807111119291750","Amount":50000,"CurrencyID":"TWD","PayType":"C","ATMParam":{},"CardParam":{"AutoBilling":"N","ExpMinutes":30},"PrdtName":"\u4fe1\u7528\u5361\u8a02\u55ae","ReturnURL":"http://10.11.22.113:8803/QPay.ApiClient-Sandbox/Store/Return","BackendURL":"https://sandbox.sinopac.com/funBIZ.ApiClient/AutoPush/PushSuccess"}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u800c\u5728AES\u52a0\u5bc6\u904e\u7a0b\u6642\uff0c\u9664\u4e86\u628a\u539f\u660e\u6587\u8cc7\u6599\u3001AES Key\u3001IV\u7684bytearray\u50b3\u5165\uff0c\u5728cipher.encrypt()\u52a0\u5bc6\u6642\u8981\u7b26\u5408\u5340\u584a\u9577\u5ea6\u7684\u500d\u6578\uff0cAES\u4f7f\u7528128 bit(16 bytes)\u7684\u5340\u584a\u9577\u5ea6\uff0c\u56e0\u6b64\u6211\u5011\u7684\u660e\u6587\u4e5f\u9700\u8981\u7b26\u5408\u5176\u500d\u6578\u898f\u5247\uff0c\u56e0\u6b64\u53ef\u900f\u904eCrypto.Util.Padding\u4e2d\u7684pad()\u65b9\u6cd5\u4f86\u4f5cpadding\u586b\u88dc\uff0c\u6240\u4ee5\u5728\u5c07\u660e\u6587\u7684bytearray\u53d6\u51fa\u5f8c\u53ef\u5e36\u5165",(0,i.jsx)(e.code,{children:"AES.block_size"}),"\u4f5c\u70ba\u586b\u88dc\u53c3\u6578\u3002\n\u4f8b\u5982\u539f\u672c\u5167\u6587\u9577\u5ea6\u70ba349 Bytes\uff0c\u7d93pad()\u5f8c\u6703\u81ea\u52d5\u586b\u88dc\u70ba\u7b26\u540816 Bytes\u500d\u6578\u898f\u7bc4\u7684352 Bytes\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7d42\u65bc\u628amessage\u5bc6\u6587\u6e96\u5099\u597d\u4e86",children:"\u7d42\u65bc\u628aMessage\u5bc6\u6587\u6e96\u5099\u597d\u4e86"}),"\n",(0,i.jsxs)(e.p,{children:["\u7d93\u904e\u4e86\u9019\u4e00\u9023\u4e32\u7684\u5099\u6599\u6e96\u5099\u5f8c\uff0c\u7d42\u65bc\u628a\u50b3\u8aaa\u4e2d\u7684",(0,i.jsx)(e.code,{children:"Message"}),"\u5bc6\u6587\u6e96\u5099\u597d\u4e86\uff01\n\u4f46\u9084\u6c92\u5b8c\u5462\uff0c\u9664\u4e86\u6211\u5011\u6e96\u5099\u597d\u7684\u5bc6\u6587\u5916\uff0c\u9084\u6709\u4e00\u500b\u91cd\u8981\u7684\u5b89\u5168\u7c3d\u7ae0",(0,i.jsx)(e.code,{children:"Sign"}),"\u8981\u6e96\u5099\uff0c\u624d\u53ef\u4ee5\u628a\u6700\u7d42\u547c\u53ebAPI\u7684\u6240\u9700\u6b04\u4f4d\u5099\u9f4a\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function c(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);