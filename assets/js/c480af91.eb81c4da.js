"use strict";(self.webpackChunkcodetenshu=self.webpackChunkcodetenshu||[]).push([[6045],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=d(n),u=r,g=m["".concat(i,".").concat(u)]||m[u]||c[u]||o;return n?a.createElement(g,l(l({ref:t},s),{},{components:n})):a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=u;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[m]="string"==typeof e?e:r,l[1]=p;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7102:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:25},l=void 0,p={unversionedId:"finance-bank-api/Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae",id:"finance-bank-api/Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae",title:"Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae",description:"\u4eca\u5929\u9019\u7bc7\u662f\u6211\u5011\u5be6\u4f5c\u5eab\u7c73\u72d7\u5c4b\u25cfKummyShop\u7684\u60c5\u5883\u96fb\u5546\u6a21\u64ec\u7684\u6700\u7d42\u7ae0\u4e86\uff01\u4eca\u5929\u6211\u5011\u8981\u628a\u5148\u524d\u5efa\u7684\u4e00\u5806\u8a02\u55ae\u53ef\u4ee5\u5728\u6211\u7684\u8a02\u55ae\u9801\u9762\u5448\u73fe\u51fa\u4f86\u3002",source:"@site/docs/finance-bank-api/Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae.md",sourceDirName:"finance-bank-api",slug:"/finance-bank-api/Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae",permalink:"/docs/finance-bank-api/Day24 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(5) - \u6211\u7684\u8a02\u55ae",draft:!1,tags:[],version:"current",sidebarPosition:25,frontMatter:{sidebar_position:25},sidebar:"tutorialSidebar",previous:{title:"Day23 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(4) - \u4fe1\u7528\u5361\u5237\u5361\u7d50\u679c",permalink:"/docs/finance-bank-api/Day23 - \u4ee5Django Web\u6846\u67b6\u5be6\u4f5c\u6c38\u8c50API\u7dda\u4e0a\u652f\u4ed8\u6a21\u64ec\u60c5\u5883(4) - \u4fe1\u7528\u5361\u5237\u5361\u7d50\u679c"},next:{title:"Day25 - \u6c38\u8c50\u7dda\u4e0a\u6536\u6b3e\u652f\u4ed8API\u529f\u80fd\u5be6\u4f5c\u7e3d\u7d50(1)",permalink:"/docs/finance-bank-api/Day25 - \u6c38\u8c50\u7dda\u4e0a\u6536\u6b3e\u652f\u4ed8API\u529f\u80fd\u5be6\u4f5c\u7e3d\u7d50(1)"}},i={},d=[{value:"\u7c21\u5316\u7684\u90e8\u4efd\u8aaa\u660e",id:"\u7c21\u5316\u7684\u90e8\u4efd\u8aaa\u660e",level:3},{value:"\u6e96\u5099\u4e00\u4e0b\u53d6Order\u7684Model",id:"\u6e96\u5099\u4e00\u4e0b\u53d6order\u7684model",level:3},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e",level:5},{value:"\u63a5\u8457\u5728View\u65b0\u589emy_orders",id:"\u63a5\u8457\u5728view\u65b0\u589emy_orders",level:3},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e-1",level:5},{value:"\u66f4\u6709\u6548\u7684\u8655\u7406\u4ee3\u78bc\u8f49\u63db\u554f\u984c",id:"\u66f4\u6709\u6548\u7684\u8655\u7406\u4ee3\u78bc\u8f49\u63db\u554f\u984c",level:3},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e-2",level:5},{value:"\u91cd\u982d\u6232\uff0c\u6211\u5011\u7684\u6700\u5f8c\u5448\u73feTemplate",id:"\u91cd\u982d\u6232\u6211\u5011\u7684\u6700\u5f8c\u5448\u73fetemplate",level:3},{value:"\u7a0b\u5f0f\u8aaa\u660e",id:"\u7a0b\u5f0f\u8aaa\u660e-3",level:5},{value:"\u8655\u7406\u683c\u5f0f\u8207\u4ee3\u78bc\u8f49\u63db",id:"\u8655\u7406\u683c\u5f0f\u8207\u4ee3\u78bc\u8f49\u63db",level:4},{value:"\u8655\u7406\u4ed8\u6b3e\u72c0\u614b\u7684\u8868\u683cRow\u984f\u8272",id:"\u8655\u7406\u4ed8\u6b3e\u72c0\u614b\u7684\u8868\u683crow\u984f\u8272",level:4},{value:"\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd",id:"\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd",level:4},{value:"\u8655\u7406\u5206\u9801\u7a0b\u5f0f",id:"\u8655\u7406\u5206\u9801\u7a0b\u5f0f",level:4}],s={toc:d};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u4eca\u5929\u9019\u7bc7\u662f\u6211\u5011\u5be6\u4f5c",(0,r.kt)("strong",{parentName:"p"},"\u5eab\u7c73\u72d7\u5c4b\u25cfKummyShop"),"\u7684\u60c5\u5883\u96fb\u5546\u6a21\u64ec\u7684\u6700\u7d42\u7ae0\u4e86\uff01\u4eca\u5929\u6211\u5011\u8981\u628a\u5148\u524d\u5efa\u7684\u4e00\u5806\u8a02\u55ae\u53ef\u4ee5\u5728",(0,r.kt)("strong",{parentName:"p"},"\u6211\u7684\u8a02\u55ae"),"\u9801\u9762\u5448\u73fe\u51fa\u4f86\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u9810\u8a08\uff0c\u53ef\u4ee5\u5728\u88e1\u9762\u770b\u5230\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8a02\u55ae",(0,r.kt)("strong",{parentName:"li"},"\u6392\u5e8f"),"\uff0c\u65b0\u7684\u5728\u6700\u4e0a\u9762"),(0,r.kt)("li",{parentName:"ul"},"\u8a02\u55ae\u6703\u6709",(0,r.kt)("strong",{parentName:"li"},"\u5206\u9801"),"\u529f\u80fd"),(0,r.kt)("li",{parentName:"ul"},"\u6703\u5217\u51fa",(0,r.kt)("strong",{parentName:"li"},"\u8a02\u55ae\u7de8\u865f\u3001\u7e3d\u91d1\u984d\u3001\u4ed8\u6b3e\u65b9\u5f0f\u3001\u4ed8\u6b3e\u72c0\u614b\u3001\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd"),"(\u4f8b\u5982\u53ef\u4ee5\u91cd\u65b0\u5237\u5361\u3001\u986f\u793aATM\u8f49\u5e33\u5e33\u865f)"),(0,r.kt)("li",{parentName:"ul"},"\u8868\u683c\u7684\u5217\u4f9d\u4e0d\u540c\u72c0\u614b",(0,r.kt)("strong",{parentName:"li"},"\u5340\u5206\u984f\u8272"),"\uff1a\u5931\u6557\u70ba\u7d05\u8272\u3001\u5c1a\u672a\u4ed8\u6b3e\u70ba\u85cd\u8272\uff0c\u53ea\u6709\u6210\u529f\u4ed8\u6b3e\u624d\u6703\u662f\u767d\u8272\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5c07\u91d1\u984d\u52a0\u4e0a\u5343\u4f4d",(0,r.kt)("strong",{parentName:"li"},"\u9017\u865f"),"\u3001",(0,r.kt)("strong",{parentName:"li"},"\u65e5\u671f\u683c\u5f0f\u5316"),"\u3001\u5c07\u539f\u672c\u4ed8\u6b3e\u65b9\u5f0f\u3001\u72c0\u614b\u4ee3\u78bc\u7b49\u63db\u6210",(0,r.kt)("strong",{parentName:"li"},"\u5c0d\u61c9\u7684\u6587\u5b57"))),(0,r.kt)("h3",{id:"\u7c21\u5316\u7684\u90e8\u4efd\u8aaa\u660e"},"\u7c21\u5316\u7684\u90e8\u4efd\u8aaa\u660e"),(0,r.kt)("p",null,"\u70ba\u4e86\u5c08\u6ce8\u6211\u5011\u60f3\u8ac7\u7684\u529f\u80fd\uff0c\u9019\u908a\u4f5c\u4e86\u5f88\u591a\u7684\u7c21\u5316\uff0c\u89ba\u5f97\u548c\u6b63\u5f0f\u96fb\u5546\u76f8\u6bd4\u6709\u7f3a\u5c11\u4e4b\u8655\uff0c\u90fd\u8acb\u81ea\u884c\u8166\u88dc\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u6c92\u6709\u5176\u4ed6\u7684User\uff0c\u6240\u4ee5\u4e5f\u4e0d\u7528\u5206\u4e86\uff0c\u6240\u4ee5\u5168\u5e97\u7684\u8cc7\u6599\u90fd\u6b78\u540c\u4e00\u500b\u4eba\u6240\u6709\uff0c\u4e0d\u7528\u7be9\u9078\u4e86 (\u5c0f\u5b69\u624d\u4f5c\u9078\u64c7\uff01)"),(0,r.kt)("li",{parentName:"ol"},"\u8a02\u55ae\u88e1\u9762\u4e0d\u6703\u5b58\u7576\u6642\u9078\u7684\u5546\u54c1\u5167\u5bb9\uff0c\u53cd\u6b63\u5c31\u662f\u4e00\u7b46\u4e00\u7b46\u7684\u8a02\u55ae\u6709\u91d1\u984d\u4ee5\u53ca\u7576\u6642\u9078\u64c7\u7684\u4ed8\u6b3e\u65b9\u5f0f"),(0,r.kt)("li",{parentName:"ol"},"\u4e0d\u6703\u591a\u505a\u984d\u5916\u7684\u4f8b\u5916\u8655\u7406\u9632\u8b77")),(0,r.kt)("p",null,"\u90a3\u9ebc\u5c31\u53ef\u4ee5\u958b\u59cb\u5f80\u4e0b\u770b\u4e86\u3002"),(0,r.kt)("h3",{id:"\u6e96\u5099\u4e00\u4e0b\u53d6order\u7684model"},"\u6e96\u5099\u4e00\u4e0b\u53d6Order\u7684Model"),(0,r.kt)("p",null,"\u9019\u652f\u7a0b\u5f0f\u5f88\u7c21\u55ae\uff0c\u6211\u5011\u9700\u8981\u53ef\u4ee5\u53d6\u5f97\u4ee5",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"\u4f86\u6392\u5e8f\u7684\u964d\u51aa\u6392\u5e8f\uff0c\u6700\u591a\u56de\u50b3100\u7b46\u8cc7\u6599\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def get_my_orders(top=100):\n    return Payment.objects.all().order_by('-id')[:top]\n")),(0,r.kt)("h5",{id:"\u7a0b\u5f0f\u8aaa\u660e"},"\u7a0b\u5f0f\u8aaa\u660e"),(0,r.kt)("p",null,"\u4f7f\u7528Model\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"objects.all()"),"\u53d6\u56de\u6240\u6709\u8cc7\u6599\uff0c\u4f46\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"order_by()"),"\u4f9d",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"\u53cd\u5411\u6392\u5e8f\uff0c\u4f5c\u6cd5\u5c31\u662f\u5728\u524d\u9762\u52a0\u4e0a\u4e00\u500b",(0,r.kt)("strong",{parentName:"p"},"\u6e1b\u865f"),"\u3002\u800c\u53d6\u6392\u5e8f\u5f8c\u7684\u524d",(0,r.kt)("inlineCode",{parentName:"p"},"top"),"\u7b46\u8cc7\u6599\uff0c\u53c3\u6578\u9810\u8a2d\u503c\u70ba100\u3002"),(0,r.kt)("h3",{id:"\u63a5\u8457\u5728view\u65b0\u589emy_orders"},"\u63a5\u8457\u5728View\u65b0\u589emy_orders"),(0,r.kt)("p",null,"\u5728\u9019\u88e1\u6211\u5011\u9700\u8981\u8655\u7406\u7684\u662f\u53d6\u5f97model\u4e2d\u7684orders\u8cc7\u6599\uff0c\u4ee5\u53ca\u52a0\u4e0a\u5206\u9801\u7684\u6a5f\u5236\u3002\u6211\u5011\u53ef\u4f7f\u7528Django\u5167\u5efa\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Paginator"),"\u6a21\u7d44\u4f86\u5feb\u901f\u7522\u751f\u5206\u9801\u7684\u8a08\u7b97\u8207\u8cc7\u6599\u5207\u5272\uff0c\u76f8\u7576\u65b9\u4fbf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from django.core.paginator import Paginator\n\ndef my_orders(request):\n    page_number = request.GET.get('page', 1)\n    orders_total = get_my_orders()\n    paginator = Paginator(orders_total, 10)\n    page_orders = paginator.page(page_number)\n    context = {\"page_orders\": page_orders}\n    return render(request, 'order/my_orders.html', context)\n")),(0,r.kt)("h5",{id:"\u7a0b\u5f0f\u8aaa\u660e-1"},"\u7a0b\u5f0f\u8aaa\u660e"),(0,r.kt)("p",null,"\u9019\u88e1\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Paginagor"),"\u7684\u985e\u5225\u4f86\u88dd\u8f09\u6211\u5011\u53d6\u56de\u7684order\u8cc7\u6599\uff0c\u4e26\u8a2d\u5b9a\u5176\u5206\u9801\u4e00\u9801\u5927\u5c0f\uff0c\u6211\u5011\u8a2d\u5b9a10\u7b46\u70ba\u4e00\u9801\u3002\n\u63a5\u8457\u5c31\u53ef\u4ee5\u5f9erequest\u50b3\u5165\u4e00\u500b",(0,r.kt)("inlineCode",{parentName:"p"},"page"),"\u53c3\u6578\u4f86\u6c7a\u5b9a\u7b49\u4e00\u4e0b\u8fd4\u56de\u7d66Template\u8cc7\u6599\u662f\u7b2c\u5e7e\u9801\u7684\u8cc7\u6599\u5167\u5bb9\uff0c\u9019\u4e9b\u5168\u90e8\u90fd\u4ea4\u7d66paginator\u6a5f\u5236\u4f86\u904b\u7b97\u3002"),(0,r.kt)("h3",{id:"\u66f4\u6709\u6548\u7684\u8655\u7406\u4ee3\u78bc\u8f49\u63db\u554f\u984c"},"\u66f4\u6709\u6548\u7684\u8655\u7406\u4ee3\u78bc\u8f49\u63db\u554f\u984c"),(0,r.kt)("p",null,"\u6211\u5011\u6709\u5f88\u591a\u7684\u503c\u90fd\u662f\u4ee5\u4ee3\u78bc\u5132\u5b58\uff0c\u90a3\u986f\u793a\u7684\u6642\u5019\u600e\u9ebc\u8fa6\u5462\uff1f\n\u5728\u4e0a\u4e00\u7bc7\u6587\u7ae0\u6709\u63d0\u5230\u4e00\u4e9b\u4e0a\u6b21\u4f5c\u4e86\u4e00\u5c0f\u90e8\u4efd\u4ee3\u78bc\u8f49\u63db\u7684\u60f3\u6cd5\uff0c\u9019\u6b21\u6211\u5011\u4f7f\u7528\u4e86Django Template\u7684TemplateTags\u7684\u4f5c\u6cd5\u4f86\u89e3\u6c7a\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u6703\u9700\u8981\u6e96\u5099\u5169\u500b\u8f49\u63db\u4ee3\u78bc\u7684\u65b9\u6cd5\uff0c\u4e00\u500b\u4f86\u8655\u7406",(0,r.kt)("strong",{parentName:"p"},"\u4ed8\u6b3e\u65b9\u5f0f"),"(C\u6216A)\uff0c\u4e00\u500b\u4f86\u8655\u7406",(0,r.kt)("strong",{parentName:"p"},"\u4ed8\u6b3e\u72c0\u614b"),"(W\u3001S\u3001F)\u3002\u6211\u5011\u9700\u8981\u5728Django \u5c0d\u61c9\u7684App\u5e95\u4e0b(\u6211\u5011\u9019\u88e1\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"order")," App)\uff0c\u5efa\u7acb\u4e00\u500b\u540d\u70ba",(0,r.kt)("inlineCode",{parentName:"p"},"TemplateTags"),"\u7684\u76ee\u9304\uff0c\u5728\u5e95\u4e0b\u65b0\u589e\u4e00\u500b\u7a7a\u767d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"__init__.py"),"\u4f5c\u70ba\u8b58\u5225\u7528\u9014\uff0c\u4ee5\u53ca\u4e00\u500b\u6211\u5011\u8981\u8655\u7406\u7684\u908f\u8f2f",(0,r.kt)("inlineCode",{parentName:"p"},"order_converter.py"),"\u3002"),(0,r.kt)("p",null,"\u5728\u6211\u5011\u7684Django\u76ee\u9304\u5982\u4e0b\u6240\u793a\uff1a\n",(0,r.kt)("img",{parentName:"p",src:"https://ithelp.ithome.com.tw/upload/images/20211009/20130354DmA1eRuGa9.png",alt:"https://ithelp.ithome.com.tw/upload/images/20211009/20130354DmA1eRuGa9.png"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from django import template\n\nregister = template.Library()\n\n\n@register.filter\ndef convert_pay_status(value):\n    convert_dict = {"W": "\u5c1a\u672a\u4ed8\u6b3e", "S": "\u4ed8\u6b3e\u6210\u529f", "F": "\u4ed8\u6b3e\u5931\u6557"}\n    return convert_dict.get(value.upper())\n\n\n@register.filter\ndef convert_pay_type(value):\n    convert_dict = {"A": "ATM\u8f49\u5e33", "C": "\u4fe1\u7528\u5361"}\n    return convert_dict.get(value.upper())\n')),(0,r.kt)("h5",{id:"\u7a0b\u5f0f\u8aaa\u660e-2"},"\u7a0b\u5f0f\u8aaa\u660e"),(0,r.kt)("p",null,"\u63a5\u8457\u4f86\u8aaa\u660e\u4e00\u4e0b\u9019\u652fconverter\u6703\u7528\u5230\u7684\u90e8\u4efd\uff0c\u9019\u500b\u662f\u8981\u7d66Template\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\u6211\u5011\u8981\u5148\u884c\u5f15\u5165django\u7684template\u4ee5\u53ca\u4f7f\u7528\u5176Library()\u65b9\u6cd5\u5efa\u7acb\u4e00\u500bfilter\u8a3b\u518a\u7269\u4ef6\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u4f7f\u7528\u5c6c\u6027\u5ba3\u544a\u65b9\u5f0f\u5728\u9019\u5169\u500b\u65b9\u6cd5\u524d\u9762\u52a0\u4e0a",(0,r.kt)("inlineCode",{parentName:"p"},"@register.filter"),"\uff0c\u63a5\u8457\u5c31\u4f7f\u7528\u7c21\u55ae\u7684\u65b9\u5f0f\u628a\u5c0d\u61c9\u7684\u4ee3\u78bc\u4f5c\u8f49\u63db\u5f8c\u56de\u50b3\u3002"),(0,r.kt)("p",null,"\u9019\u88e1\u6211\u5011\u70ba\u4e86\u4e0d\u5931\u7126\uff0c\u4e0d\u7279\u5225\u53bb\u8655\u7406\u5176\u4ed6\u7684\u7570\u5e38\u8655\u7406\u4f5c\u6cd5\uff0c\u4f46\u5728\u7522\u54c1\u7d1a\u7684\u7cfb\u7d71\u88e1\uff0c\u8acb\u8981\u984d\u5916\u8655\u7406\u4e0d\u5728\u6211\u5011\u8a8d\u77e5\u7684\u503c\u7684\u8655\u7406\u6a5f\u5236\u3002\u800c\u4e14\u9019\u6a23\u7684\u5c0d\u61c9\u8868\uff0c\u901a\u5e38\u4e5f\u6703\u53e6\u5916\u6e96\u5099\u5728\u5916\u90e8\u7684properties\u6a94\u6216\u8cc7\u6599\u5eab\u4e2d\u53bb\u5b9a\u7fa9\uff0c\u4e0d\u6703\u76f4\u63a5hard code\u5728\u7a0b\u5f0f\u78bc\u88e1\u9762\u3002\u7e3d\u4e4b\uff0c\u9435\u4eba\u8cfd\u9019\u4e00\u7cfb\u5217\u6587\u7ae0\u4e2d\uff0c\u50c5\u8655\u7406\u9700\u8981\u7684\u908f\u8f2f\u8207\u7c21\u6613\u5f0f\u5beb\u6cd5\uff0c\u4e0d\u6703\u7279\u5225\u53bb\u8655\u7406try/catch\u7684\u7570\u5e38\u8655\u7406\u6a5f\u5236\uff0c\u6709\u9700\u8981\u53c3\u8003\u8005\uff0c\u8acb\u81ea\u884c\u82b1\u6642\u9593\u53bb\u64b0\u5beb\u5177\u5099\u4fdd\u8b77\u529b(\u54a6?)\u7684\u7a0b\u5f0f\u78bc\u5594\uff01"),(0,r.kt)("h3",{id:"\u91cd\u982d\u6232\u6211\u5011\u7684\u6700\u5f8c\u5448\u73fetemplate"},"\u91cd\u982d\u6232\uff0c\u6211\u5011\u7684\u6700\u5f8c\u5448\u73feTemplate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "base.html" %}\n{% load bootstrap5 %}\n{% load humanize %}\n{% load order_converter %}\n\n{% block title %}{{ title }}{% endblock %}\n\n{% block body %}\n<nav id="app" class="row g-3 align-self-center">\n<h1 class="display-4 text-center  mb-3 mt-5">\u6211\u7684\u8a02\u55ae</h1>\n<p class="lead  text-center">\u770b\u770b\u6211\u90fd\u8cb7\u4e86\u4e9b\u4ec0\u9ebc\u5440\u2026</p>\n<hr/>\n<div class="">\n<table class="table">\n  <thead>\n    <tr>\n      <th scope="col">\u8a02\u55ae\u865f\u78bc</th>\n      <th scope="col">\u7e3d\u91d1\u984d</th>\n      <th scope="col">\u8a02\u55ae\u6642\u9593</th>\n      <th scope="col">\u4ed8\u6b3e\u65b9\u5f0f</th>\n      <th scope="col">\u4ed8\u6b3e\u72c0\u614b</th>\n      <th scope="col">\u52d5\u4f5c</th>\n    </tr>\n  </thead>\n  <tbody>\n    {% for order in page_orders %}\n    <tr class={% if order.pay_status == \'F\' %}"table-danger"{% elif order.pay_status == \'W\' %}table-info{% endif %}>\n      <th scope="row">{{ order.order_no }}</th>\n      <td>NT$ {{ order.amount|intcomma }}</td>\n      <td>{{ order.create_time|date:\'Y-m-d H:i\' }}</td>\n      <td>{{ order.pay_type|convert_pay_type }}</td>\n      <td>{{ order.pay_status|convert_pay_status }}</td>\n      <td>{% if order.pay_status == \'F\' %}<a href="{{ order.card_pay_url }}" >\u91cd\u65b0\u5237\u5361</a>{% endif %}</td>\n    </tr>\n    {% endfor %}\n  </tbody>\n</table>\n</div>\n\n<div class="text-center">\n    <span class="current">\n        \u7b2c {{ page_orders.number }} \u9801 / \u5171 {{ page_orders.paginator.num_pages }} \u9801\n    </span>\n</div>\n\n<ul class="pagination justify-content-center">\n    {% if page_orders.has_previous %}\n        <li class="page-item"><a class="page-link" href="?page=1">\u7b2c\u4e00\u9801</a></li>\n        <li class="page-item"><a class="page-link" href="?page={{ page_orders.previous_page_number }}">\u4e0a\u4e00\u9801</a></li>\n    {% endif %}\n\n    {% if page_orders.has_next %}\n        <li class="page-item"><a class="page-link" href="?page={{ page_orders.next_page_number }}">\u4e0b\u4e00\u9801</a></li>\n        <li class="page-item"><a class="page-link" href="?page={{ page_orders.paginator.num_pages }}">\u6700\u672b\u9801</a></li>\n\n    {% endif %}\n</ul>\n\n</div>\n{% endblock %}\n\n{% block script %}\n{% endblock %}\n')),(0,r.kt)("h5",{id:"\u7a0b\u5f0f\u8aaa\u660e-3"},"\u7a0b\u5f0f\u8aaa\u660e"),(0,r.kt)("p",null,"\u525b\u524d\u9762\u6709\u63d0\u5230\u6211\u5011\u7684\u5e7e\u500b\u8cc7\u6599\u986f\u793a\u8655\u7406\u8981\u9ede\uff0c\u5fd8\u8a18\u7684\u53ef\u4ee5\u518d\u5230\u4e0a\u9762\u78ba\u8a8d\u4e00\u4e0b\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u53d6\u56de\u4e86\u5177\u5099\u5df2\u5206\u9801\u5b8c\u7684order\u8cc7\u6599\uff0c\u56e0\u6b64\u6211\u5011\u60f3\u8981\u5728\u8868\u9762\u4e0a\uff0c\u4f7f\u7528for\u8ff4\u5708\u628a\u8cc7\u6599\u986f\u793a\u5728\u4e0a\u9762\uff0c\u6240\u4ee5\u9700\u8981\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"tr"),"\u7684\u5730\u65b9\u52a0\u4e0a\u6240\u9700\u7684\u8ff4\u5708\u908f\u8f2f\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u642d\u914d\u4f7f\u7528\u4e86Bootstrap\u7684Table\u986f\u793a\uff0c\u56e0\u6b64\u7b49\u4e00\u4e0b\u91dd\u5c0d\u4e0d\u540c",(0,r.kt)("inlineCode",{parentName:"p"},"\u4ed8\u6b3e\u72c0\u614b"),"\u6703\u6709\u4e0d\u540c\u7684bootstrap\u7684\u984f\u8272\uff0c\u6211\u5011\u6703\u5e36\u5165\u76f8\u5c0d\u61c9\u7684table color CSS\u3002"),(0,r.kt)("h4",{id:"\u8655\u7406\u683c\u5f0f\u8207\u4ee3\u78bc\u8f49\u63db"},"\u8655\u7406\u683c\u5f0f\u8207\u4ee3\u78bc\u8f49\u63db"),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c\u6211\u5011\u6703\u986f\u793a\u4e94\u500b\u6b04\u4f4d\u7684\u503c\uff1a",(0,r.kt)("strong",{parentName:"p"},"\u8a02\u55ae\u7de8\u865f\u3001\u7e3d\u91d1\u984d\u3001\u4ed8\u6b3e\u65b9\u5f0f\u3001\u4ed8\u6b3e\u72c0\u614b\u3001\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd")),(0,r.kt)("p",null,"\u5728",(0,r.kt)("strong",{parentName:"p"},"\u7e3d\u91d1\u984d"),"\u7684\u5730\u65b9\uff0c\u6211\u5011\u9700\u8981\u5c07\u6578\u5b57\u52a0\u4e0a\u5343\u4f4d\u6578\u9017\u865f\uff0c\u9019\u90e8\u4efd\u53ef\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"humanize"),"\u6a21\u7d44\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"intcomma"),"\u529f\u80fd\uff0c\u8981\u4f7f\u7528\u4e4b\u524d\uff0c\u9700\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"settings.py"),"\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"INSTALLED_APPS"),"\u52a0\u4e0a\u6a21\u7d44\u7684\u8a2d\u5b9a\u624d\u80fd\u4f7f\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.humanize',\n    'bootstrap5',\n    'order',\n    'greetings',\n]\n")),(0,r.kt)("p",null,"\u63a5\u8457\u5c31\u53ef\u4ee5\u5f88\u7c21\u55ae\u5728Template\u4e2d\u7684\u8b8a\u6578\u5f8c\u9762\u52a0\u4e0a",(0,r.kt)("inlineCode",{parentName:"p"},"|"),"\u5f8c\u5957\u5165\u4f7f\u7528\uff0c\u5982\u6b64\u4e00\u4f86",(0,r.kt)("inlineCode",{parentName:"p"},"NT$ 12345"),"\u5c31\u6703\u8b8a\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"NT$ 12,345"),"\u4e86\u3002\n\u800c\u6642\u9593\u683c\u5f0f\u4e5f\u53ef\u4ee5\u4f7f\u7528filter\u5e36\u5165\uff0c\u5982\u4e0b\u65b9code\u6240\u793a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"{% load humanize %}\n\n\x3c!-- \u2026\u7565\u2026 --\x3e\n\n      <td>NT$ {{ order.amount|intcomma }}</td>\n      <td>{{ order.create_time|date:'Y-m-d H:i' }}</td>      \n")),(0,r.kt)("p",null,"\u5728",(0,r.kt)("strong",{parentName:"p"},"\u4ed8\u6b3e\u65b9\u5f0f\u3001\u4ed8\u6b3e\u72c0\u614b"),"\u7684\u5730\u65b9\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u5957\u7528\u5beb\u597d\u7684TemplateTags filter\uff0c\u5206\u5225\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"convert_pay_type"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"convert_pay_status"),"\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c\u4e0a\u9762\u4e00\u6a23\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"{% load order_converter %}\n\n\x3c!-- \u2026\u7565\u2026 --\x3e\n\n      <td>{{ order.pay_type|convert_pay_type }}</td>\n      <td>{{ order.pay_status|convert_pay_status }}</td>\n")),(0,r.kt)("p",null,"\u5982\u6b64\u4e00\u4f86\uff0c\u5c31\u53ef\u4ee5\u5c07\u4ed8\u6b3e\u72c0\u614b\u4f8b\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"S"),"\u8f49\u63db\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"\u4ed8\u6b3e\u6210\u529f"),"\u7684\u6587\u5b57\u8868\u793a\u3002"),(0,r.kt)("h4",{id:"\u8655\u7406\u4ed8\u6b3e\u72c0\u614b\u7684\u8868\u683crow\u984f\u8272"},"\u8655\u7406\u4ed8\u6b3e\u72c0\u614b\u7684\u8868\u683cRow\u984f\u8272"),(0,r.kt)("p",null,"\u6211\u5011\u53ef\u4f9d\u64da\u8a02\u55ae\u7684\u4ed8\u6b3e\u72c0\u614b\uff0c\u4f86\u6539\u8b8aBootstrap\u7684\u984f\u8272\u3002\n\u6240\u4ee5\u9019\u88e1\u5f88\u7c21\u55ae\u4f9d\u72c0\u614b\uff0c\u5c07\u4ed8\u6b3e\u5931\u6557\u6539\u6210table-danger\u6216\u5c1a\u672a\u4ed8\u6b3e\u6539\u70batable-info\u3002"),(0,r.kt)("h4",{id:"\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd"},"\u984d\u5916\u8cc7\u8a0a\u6216\u529f\u80fd"),(0,r.kt)("p",null,"\u7576\u8a02\u55ae\u5728\u4ed8\u6b3e\u6210\u529f\u7684\u72c0\u614b\uff0c\u6211\u5011\u984f\u8272\u5c31\u662f\u7dad\u6301\u767d\u8272\u7cfb\uff0c\u984d\u5916\u8cc7\u8a0a\u4e5f\u6703\u4fdd\u6301\u7a7a\u767d\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f",(0,r.kt)("strong",{parentName:"li"},"ATM\u8f49\u5e33"),"\u300c\u5c1a\u672a\u4ed8\u6b3e\u6216\u4ed8\u6b3e\u5931\u6557\u300d\uff1a\u6211\u5011\u6703\u5c07\u6240\u9700\u8981\u8f49\u5165\u7684\u4ed8\u6b3e\u865b\u64ec\u5e33\u865f\u518d\u5e36\u51fa\u4f86\uff0c\u8b93\u9867\u5ba2\u53ef\u4ee5\u518d\u6b21\u57f7\u884c\u8f49\u5e33\u52d5\u4f5c\u3002(\u5982\u679c\u53ef\u4ee5\uff0c\u61c9\u8a72\u628a\u5931\u6548\u671f\u9650\u4e5f\u8ddf\u9867\u5ba2\u8aaa\u660e)"),(0,r.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f",(0,r.kt)("strong",{parentName:"li"},"\u4fe1\u7528\u5361"),"\u300c\u5c1a\u672a\u4ed8\u6b3e\u6216\u4ed8\u6b3e\u5931\u6557\u300d\uff1a\u6211\u5011\u6703\u5c07\u7dda\u4e0a\u5237\u5361\u7684\u7db2\u5740\u518d\u5e36\u7d66\u9867\u5ba2\u9032\u884c\u5237\u5361\uff0c\u4f46\u7576\u7136\u6709\u53ef\u80fd\u5e36\u51fa\u4f86\u7684\u9801\u9762\u5df2\u5931\u6548\u7121\u6cd5\u4f7f\u7528\u3002")),(0,r.kt)("h4",{id:"\u8655\u7406\u5206\u9801\u7a0b\u5f0f"},"\u8655\u7406\u5206\u9801\u7a0b\u5f0f"),(0,r.kt)("p",null,"\u5728\u5206\u9801\u7684\u8655\u7406\uff0c\u6211\u5011\u539f\u5148\u5f9eView\u8f49\u81f3Template\u6642\uff0c\u8a18\u5f97",(0,r.kt)("inlineCode",{parentName:"p"},"page_orders"),"\u7269\u4ef6\u662f\u600e\u9ebc\u4f86\u7684\u55ce\uff1f\n\u770b\u4e00\u4e0b\u9019\u4e09\u884c\uff0c\u6211\u5011\u662f\u4f7f\u7528\u4e86paginator\u7684page()\u53d6\u56de\u4ecd\u5177\u5099\u6709\u5206\u9801\u529f\u80fd\u7684\u7269\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    orders_total = get_my_orders()\n    paginator = Paginator(orders_total, 10)\n    page_orders = paginator.page(page_number)\n")),(0,r.kt)("p",null,"\u6240\u4ee5\u5728Template\u4e2d\uff0c\u6211\u5011\u4f9d\u820a\u53ef\u4f7f\u7528\u5176\u76f8\u95dc\u7684\u529f\u80fd\u4f86\u4f5c\u5224\u65b7\u6216\u9032\u884c\u5206\u9801\u9801\u6578\u7684\u53d6\u5f97\u3002"),(0,r.kt)("p",null,"number\uff1a\u76ee\u524d\u7684\u9801\u6578\nhas_previous\uff1a\u5224\u65b7\u662f\u5426\u6709\u4e0a\u4e00\u9801 (\u5982\u679c\u6c92\u6709\uff0c\u8868\u793a\u5c31\u5728\u7b2c\u4e00\u9801)\nprevious_page_number\uff1a\u5982\u679c\u6709\uff0c\u5247\u81ea\u52d5\u53d6\u56de\u4e0a\u4e00\u9801\u7684\u9801\u78bc\u3002"),(0,r.kt)("p",null,"has_next\uff1a\u5224\u65b7\u662f\u5426\u6709\u4e0b\u4e00\u9801 (\u5982\u679c\u6c92\u6709\uff0c\u8868\u793a\u5c31\u5728\u6700\u5f8c\u4e00\u9801)\nnext_page_number\uff1a\u5982\u679c\u6709\uff0c\u5247\u81ea\u52d5\u53d6\u56de\u4e0b\u4e00\u9801\u7684\u9801\u78bc\u3002\npaginator.num_pages\uff1a\u53d6\u56de\u7e3d\u9801\u6578"),(0,r.kt)("p",null,"\u5247\u6211\u5011\u53ef\u4ee5\u4f9d\u9019\u4e9b\u597d\u7528\u7684\u5c6c\u6027\uff0c\u5e36\u5165\u6211\u5011\u7684URL\u4e2d\u9032\u53bb\u63db\u9801\u7684page\u53c3\u6578\u3002"),(0,r.kt)("p",null,"\u597d\u56c9\uff0c\u53ef\u4ee5\u770b\u4e00\u4e0b\u6211\u5011\u7684\u756b\u9762\u4e86\uff01"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://ithelp.ithome.com.tw/upload/images/20211009/201303541H3JI1tuJu.png",alt:"https://ithelp.ithome.com.tw/upload/images/20211009/201303541H3JI1tuJu.png"})),(0,r.kt)("p",null,"\u9019\u6a23\u5c31\u628a",(0,r.kt)("strong",{parentName:"p"},"\u6211\u7684\u8a02\u55ae"),"\u9801\u9762\u5b8c\u6210\u4e86\uff01"),(0,r.kt)("p",null,"\u660e\u5929\u958b\u59cb\u5c31\u56de\u9867\u4e00\u4e0b\u9019\u4e9b\u65e5\u5b50\u4f86\uff0c\u5c0d\u8c50\u6536\u6b3e\u7684\u4e00\u4e9b\u4f7f\u7528\u8207\u8a2d\u8a08\u4e0a\u7684\u5fc3\u5f97\uff0c\u4e4b\u5f8c\u5269\u4e0b\u5e7e\u5929\u518d\u4f86\u770b\u8981\u8ac7\u54ea\u4e9b\u6c92\u8ac7\u5230\u7684\u8b70\u984c\uff0c\u6216\u8005\u662f\u4f86\u7814\u7a76\u4e00\u9edeShioaji\u4e86\u3002"))}m.isMDXComponent=!0}}]);